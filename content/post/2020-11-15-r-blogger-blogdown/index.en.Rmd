---
title: Creating an RSS feed for r-bloggers for my blogdown
author: LluÃ­s Revilla Sancho
date: '2022-12-30'
slug: r-blogger-blogdown
categories:
  - r
tags:
  - r
  - blogdown
authors: []
description: 'How to work around RSS incorrect XML generated by Hugo'
editor_options:
  chunk_output_type: console
featured: no
image:
  caption: ''
  focal_point: ''
subtitle: ''
summary: 'To avoid post with incorrect XML on full content you can limit the post served on the pages.'
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```

I am following [Yongfu's blog](https://yongfu.name/2018/12/13/hugo_rss.html):
I copy here the content in case it is moved:

>     Copy the default RSS template

>    Change <description>{{ .Summary | html }}</description> to <description>{{ .Content | html }}</description>

>    Create subdirectories in layouts/ and save the RSS template files (name them rss.xml) in them (one for each subdirectory).

I was first confused when I wanted to copy the rss.xml file mentioned and didn't know where to go.
I finally found the [section](https://gohugo.io/templates/rss/#the-embedded-rssxml) from which I could go to the file I was supposed to copy. 

So far so good, so without further testing I assume this worked. 
Following [the instructions](https://gohugo.io/templates/rss/), I moved the rss.xml file to `layouts/post/` to only report posts of the blog, not new projects or other leafs from Hugo.

I also created a rss.xml on `layouts/categories/`. 
As the templates provided by gohugo.io didn't work I copied and pasted the [files from Yongfu's Blog](https://github.com/liao961120/Hugo-RSS/tree/master/layouts).

To check that it worked I went to [`llrs.dev/categories/cran/index.xml`](https://llrs.dev/categories/cran/index.xml). 
It did but not for all the posts. I kept getting an error even when I set a limit of 20 post on the config.toml file `rssLimit = 20`. 

I abandoned this for a while, other projects, pandemia...

When I came back I [updated the template](https://gohugo.io/templates/rss/#the-embedded-rss-xml "Hugo documentation about RSS") on 30/12/2021 and the same error was still happening. 
After some digging I found that there is a [bug on Hugo](https://github.com/gohugoio/hugo/issues/1740) generating invalid XML code for the feeds. 

I started looking for workarounds but adding a php function or a go function didn't work well. I couldn't correctly set up the php function and I don't know how to write go.

Then I started thinking on limiting the issue, which let it to rssLimit. After several checks I didn't manage to make it work. 

But while reading [a post](https://www.gavinwray.com/2018/05/10/hugo-rss-feed/) I realized that rssLimit was no longer used (if it was ever on the first place).

So after adding:

```
[Services.RSS]
  limit = 10
```

on my config.toml with the new template, the xml feeds are working again.
There is only one problem. The [twitter tag feed](https://llrs.dev/tags/twitter/index.xml) doesn't work, because [the post that creates](https://llrs.dev/post/2019/08/13/twitter-bot/) invalid content is there.

Hope that this save people some time if they try to do that. If you follow the linked posts [like this one](https://coolbutuseless.bitbucket.io/2018/02/07/blogdown-rss-feed-of-full-articles/) and take into account this change on how to limit RSS you might avoid the problem.



### Reproducibility

<details>
```{r reproducibility, echo = FALSE}
## Reproducibility info
options(width = 120)
sessioninfo::session_info()
```
</details>
