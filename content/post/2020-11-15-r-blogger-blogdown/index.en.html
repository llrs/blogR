---
title: Creating an RSS feed for r-bloggers for my blogdown
author: Lluís Revilla Sancho
date: '2022-12-30'
slug: r-blogger-blogdown
categories:
  - r
tags:
  - r
  - blogdown
authors: []
description: 'How to work around RSS incorrect XML generated by Hugo'
editor_options:
  chunk_output_type: console
featured: no
image:
  caption: ''
  focal_point: ''
subtitle: ''
summary: 'To avoid post with incorrect XML on full content you can limit the post served on the pages.'
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>


<p>I am following <a href="https://yongfu.name/2018/12/13/hugo_rss.html">Yongfu’s blog</a>:
I copy here the content in case it is moved:</p>
<blockquote>
<pre><code>Copy the default RSS template</code></pre>
</blockquote>
<blockquote>
<p>Change <description>{{ .Summary | html }}</description> to <description>{{ .Content | html }}</description></p>
</blockquote>
<blockquote>
<p>Create subdirectories in layouts/ and save the RSS template files (name them rss.xml) in them (one for each subdirectory).</p>
</blockquote>
<p>I was first confused when I wanted to copy the rss.xml file mentioned and didn’t know where to go.
I finally found the <a href="https://gohugo.io/templates/rss/#the-embedded-rssxml">section</a> from which I could go to the file I was supposed to copy.</p>
<p>So far so good, so without further testing I assume this worked.
Following <a href="https://gohugo.io/templates/rss/">the instructions</a>, I moved the rss.xml file to <code>layouts/post/</code> to only report posts of the blog, not new projects or other leafs from Hugo.</p>
<p>I also created a rss.xml on <code>layouts/categories/</code>.
As the templates provided by gohugo.io didn’t work I copied and pasted the <a href="https://github.com/liao961120/Hugo-RSS/tree/master/layouts">files from Yongfu’s Blog</a>.</p>
<p>To check that it worked I went to <a href="https://llrs.dev/categories/cran/index.xml"><code>llrs.dev/categories/cran/index.xml</code></a>.
It did but not for all the posts. I kept getting an error even when I set a limit of 20 post on the config.toml file <code>rssLimit = 20</code>.</p>
<p>I abandoned this for a while, other projects, pandemia…</p>
<p>When I came back I <a href="https://gohugo.io/templates/rss/#the-embedded-rss-xml" title="Hugo documentation about RSS">updated the template</a> on 30/12/2021 and the same error was still happening.
After some digging I found that there is a <a href="https://github.com/gohugoio/hugo/issues/1740">bug on Hugo</a> generating invalid XML code for the feeds.</p>
<p>I started looking for workarounds but adding a php function or a go function didn’t work well. I couldn’t correctly set up the php function and I don’t know how to write go.</p>
<p>Then I started thinking on limiting the issue, which let it to rssLimit. After several checks I didn’t manage to make it work.</p>
<p>But while reading <a href="https://www.gavinwray.com/2018/05/10/hugo-rss-feed/">a post</a> I realized that rssLimit was no longer used (if it was ever on the first place).</p>
<p>So after adding:</p>
<pre><code>[Services.RSS]
  limit = 10</code></pre>
<p>on my config.toml with the new template, the xml feeds are working again.
There is only one problem. The <a href="https://llrs.dev/tags/twitter/index.xml">twitter tag feed</a> doesn’t work, because <a href="https://llrs.dev/post/2019/08/13/twitter-bot/">the post that creates</a> invalid content is there.</p>
<p>Hope that this save people some time if they try to do that. If you follow the linked posts <a href="https://coolbutuseless.bitbucket.io/2018/02/07/blogdown-rss-feed-of-full-articles/">like this one</a> and take into account this change on how to limit RSS you might avoid the problem.</p>
<div id="reproducibility" class="section level3">
<h3>Reproducibility</h3>
<details>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
##  setting  value
##  version  R version 4.1.2 (2021-11-01)
##  os       Ubuntu 20.04.3 LTS
##  system   x86_64, linux-gnu
##  ui       X11
##  language (EN)
##  collate  en_US.UTF-8
##  ctype    en_US.UTF-8
##  tz       Europe/Madrid
##  date     2021-12-30
##  pandoc   2.14.0.3 @ /usr/lib/rstudio/bin/pandoc/ (via rmarkdown)
## 
## ─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
##  package     * version date (UTC) lib source
##  blogdown      1.7     2021-12-19 [1] CRAN (R 4.1.2)
##  bookdown      0.24    2021-09-02 [1] CRAN (R 4.1.2)
##  bslib         0.3.1   2021-10-06 [1] CRAN (R 4.1.2)
##  cli           3.1.0   2021-10-27 [1] CRAN (R 4.1.2)
##  digest        0.6.29  2021-12-01 [1] CRAN (R 4.1.2)
##  evaluate      0.14    2019-05-28 [1] CRAN (R 4.1.2)
##  fastmap       1.1.0   2021-01-25 [1] CRAN (R 4.1.2)
##  htmltools     0.5.2   2021-08-25 [1] CRAN (R 4.1.2)
##  jquerylib     0.1.4   2021-04-26 [1] CRAN (R 4.1.2)
##  jsonlite      1.7.2   2020-12-09 [1] CRAN (R 4.1.2)
##  knitr         1.37    2021-12-16 [1] CRAN (R 4.1.2)
##  magrittr      2.0.1   2020-11-17 [1] CRAN (R 4.1.2)
##  R6            2.5.1   2021-08-19 [1] CRAN (R 4.1.2)
##  rlang         0.4.12  2021-10-18 [1] CRAN (R 4.1.2)
##  rmarkdown     2.11    2021-09-14 [1] CRAN (R 4.1.2)
##  rstudioapi    0.13    2020-11-12 [1] CRAN (R 4.1.2)
##  sass          0.4.0   2021-05-12 [1] CRAN (R 4.1.2)
##  sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.1.2)
##  stringi       1.7.6   2021-11-29 [1] CRAN (R 4.1.2)
##  stringr       1.4.0   2019-02-10 [1] CRAN (R 4.1.2)
##  xfun          0.29    2021-12-14 [1] CRAN (R 4.1.2)
##  yaml          2.2.1   2020-02-01 [1] CRAN (R 4.1.2)
## 
##  [1] /home/lluis/bin/R/4.1.2/lib/R/library
## 
## ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
</details>
</div>
